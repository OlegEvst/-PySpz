Metadata-Version: 2.4
Name: pyspz
Version: 0.1.0
Summary: Python library for reading SPZ (3D Gaussian Splatting) files
Author-email: Oleg Evstifeev <oleg@example.com>
License: MIT
Project-URL: Homepage, https://github.com/OlegEvst/-PySpz
Project-URL: Repository, https://github.com/OlegEvst/-PySpz
Project-URL: Issues, https://github.com/OlegEvst/-PySpz/issues
Keywords: 3d,gaussian-splatting,spz,computer-graphics
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Image Processing
Classifier: Topic :: Multimedia :: Graphics :: 3D Modeling
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy>=1.20.0
Provides-Extra: scipy
Requires-Dist: scipy>=1.7.0; extra == "scipy"
Provides-Extra: dev
Requires-Dist: pytest>=6.0; extra == "dev"
Requires-Dist: pytest-cov>=2.0; extra == "dev"
Requires-Dist: black>=21.0; extra == "dev"
Requires-Dist: flake8>=3.8; extra == "dev"
Requires-Dist: mypy>=0.800; extra == "dev"
Dynamic: license-file

# PySpz

A Python library for reading SPZ (3D Gaussian Splatting) files. This library provides functionality to load and decode SPZ files, which are compressed 3D Gaussian Splatting data files.

## Features

- **Full SPZ Format Support**: Supports SPZ versions 2 and 3
- **Spherical Harmonics**: Handles spherical harmonics coefficients (degrees 0-3)
- **Vectorized Operations**: Efficient NumPy-based decoding
- **Minimal Dependencies**: Only requires NumPy (SciPy optional for quaternion operations)
- **Binary Compatibility**: Maintains compatibility with the original C++ implementation

## Installation

```bash
pip install pyspz
```

## Quick Start

```python
import pyspz
import numpy as np

# Load SPZ file
data = pyspz.load("model.spz")

# Access Gaussian attributes
positions = data['positions']  # (N, 3) XYZ coordinates
alphas = data['alphas']       # (N, 1) opacity values
colors = data['colors']       # (N, 3) RGB colors [0,1]
scales = data['scales']       # (N, 3) XYZ scales
rotations = data['rotations'] # (N, 4) quaternions (w,x,y,z)

# Spherical harmonics (if present)
if 'sh_coeffs' in data:
    sh_coeffs = data['sh_coeffs']  # (N, K, 3) SH coefficients
```

## Supported SPZ Versions

- **Version 2**: Uses 3Ã—8-bit signed quaternions
- **Version 3**: Uses compressed 4-byte quaternions

## Data Format

The library returns a dictionary containing NumPy arrays:

| Key | Shape | Type | Description |
|-----|-------|------|-------------|
| `positions` | (N, 3) | float32 | XYZ coordinates |
| `alphas` | (N, 1) | float32 | Opacity values |
| `colors` | (N, 3) | float32 | RGB colors [0,1] |
| `scales` | (N, 3) | float32 | XYZ scales |
| `rotations` | (N, 4) | float32 | Quaternions (w,x,y,z) |
| `sh_coeffs` | (N, K, 3) | float32 | Spherical harmonics (optional) |

Where:
- `N` = number of Gaussian points
- `K` = number of SH coefficients per color (depends on degree)

## Spherical Harmonics

The library supports spherical harmonics with degrees 0-3:

| Degree | Coefficients per Color | Total per Point |
|--------|----------------------|-----------------|
| 0 | 0 | 0 |
| 1 | 3 | 9 |
| 2 | 8 | 24 |
| 3 | 15 | 45 |

## Performance

PySpz is optimized for performance with large datasets:

- **Vectorized Operations**: All decoding uses NumPy vectorization
- **Memory Efficient**: Streaming decompression without full file loading
- **Fast Quaternion Operations**: Optimized quaternion normalization

### Benchmark

On a modern machine (2023), loading a 1M point SPZ file typically takes:
- **Loading**: ~2 seconds
- **Memory Usage**: ~200MB peak

## API Reference

### `pyspz.load(source)`

Load 3D Gaussian Splatting data from an SPZ file.

**Parameters:**
- `source` (str or BinaryIO): Path to .spz file or binary file-like object

**Returns:**
- `Dict[str, np.ndarray]`: Dictionary containing Gaussian attributes

**Raises:**
- `ValueError`: If the file format is invalid or unsupported
- `RuntimeError`: If there are issues reading the file

## Requirements

- Python 3.8+
- NumPy 1.20.0+
- SciPy 1.7.0+ (optional, recommended for quaternion operations)

## Development

### Setup

```bash
git clone https://github.com/OlegEvst/-PySpz.git
cd -PySpz
pip install -e ".[dev]"
```

### Running Tests

```bash
pytest tests/
```

### Code Quality

```bash
black pyspz/ tests/
flake8 pyspz/ tests/
mypy pyspz/
```

## License

MIT License. See LICENSE file for details.

## Acknowledgments

- Original C++ implementation: [nianticlabs/spz](https://github.com/nianticlabs/spz)
- Java port: [javagl/JSpz](https://github.com/javagl/JSpz)
- This Python port maintains binary compatibility with both implementations

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## Changelog

### 0.1.0
- Initial release
- Support for SPZ versions 2 and 3
- Spherical harmonics support (degrees 0-3)
- Vectorized decoding operations
- Comprehensive test suite
